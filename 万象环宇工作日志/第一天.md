# 2024年7月25日 21:27:43
------------------------------------------------
## 目前看到的情况:
1.branch里面有dev以及dev-wu,使用哪个才是正确的开发环境?
2.数据接口在公网能访问吗?
3.有没有用cloudflare做cdn加速
4.有没有局域网测试环境 test
5.有没有灰度测试环境  gray
6.有没有正式环境  production


## 交接问题:
1.用户中心组件之间的状态管理是怎么做的？
2.用户登录的状态管理是怎么做的？
3.这个应用做了移动版吗？pc/移动版的混合适配是怎么做的？
4.我看您使用了umi,您是如何让它在ssr的工作模式下工作的?

## 代码review发现的问题:
1.没有使用原生的nextjs。

2.没有看到pc/mobile混合适配的任何相关的代码。

3.没有看到使用redux和context做状态管理的任何的尝试(但似乎使用的是一种叫model的方式 )。

4.没有用原生的nextjs + webpack, 用的umi （阿里巴巴整合webpack + nextjs的一个前端框架）使得很多事情变得复杂和隐秘，也附带了更高的学习成本，使用umi的话应该要先会webpack和nextjs，然后才是学习umi的使用。

5.没有看到开启umi的ssr,实际上并没有打开服务端渲染。

6.状态管理和守卫是从客户端通过手动设置和读取cookie进行的。
推荐的方式是在dev环境下应该打开客户端的ajax的cookie跨域设置，让服务器可以跨域向客户端写入cookie信息，服务器设置类似的credentials: true,可以向客户端跨域写入cookie信息，总之要用服务器向客户端写cookie,服务器用jwt或者session都行,然后每次进入页面需要先向服务器确认登录状态（发送ajax请求时让浏览器自己向服务器发送cookie而不是手动填写header发送），服务器确认过登录状态再告诉客户端用户访问是否合法。发布正式版时，服务器接口和客户端接口的域一致以后，再把客户端和服务器端相关跨域cookie的设置去掉就好了。这样一来就保证了登录状态的安全。因为从服务器端写入的cookie是无法进行篡改的，相对安全。
    xhrFields: {
        withCredentials: true,
    },
在ssg(静态页生成)的环境下，每请求到一个页面就进行一次确认权限的请求操作。

## 面对老板的问题：
1.项目原本计划什么时候上线?

2.Web端您让她做用了多长时间?

3.重构整个项目您能够接受吗? 就是从头来过。
    --1.1：能接受的话您觉得花费多久能接受？
        我的建议是一个半月左右。
    --1.2: 不能接受的话，基于我调查到的问题看起来根据她的代码再进行修改项目进行下去可能达不到您的预期。
        不如不做，不是钱的问题，是您的钱花了我的时间精力花了，还冒着高风险,还不一定能成事。
        umi框架我之前没用过，看了一眼文档，需要使用起来的话有学习成本，这超出了我目前的能力。